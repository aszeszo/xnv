From 811675733e97416c990e6dc9c19271b43d96248d Mon Sep 17 00:00:00 2001
From: Daniel Stone <daniel@fooishbar.org>
Date: Thu, 15 Feb 2007 19:09:00 +0200
Subject: [PATCH] os: fix client privates leak
Minor leak here.  Oops.
---
 os/connection.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/os/connection.c b/os/connection.c
index ffe911e..d0ffb81 100644
--- a/os/connection.c
+++ b/os/connection.c
@@ -1066,6 +1066,8 @@ #ifdef XDMCP
     XdmcpCloseDisplay(oc->fd);
 #endif
     CloseDownFileDescriptor(oc);
+    FreeOsBuffers(oc);
+    xfree(client->osPrivate);
     client->osPrivate = (pointer)NULL;
     if (auditTrailLevel > 1)
 	AuditF("client %d disconnected\n", client->index);
-- 
1.4.1

