[Adjusted to apply to 1.5.x tree]

From 6a1b2fed7e465a9c652e8ee250b8eab440945862 Mon Sep 17 00:00:00 2001
From: Matthieu Herrb <matthieu.herrb@laas.fr>
Date: Sun, 28 Sep 2008 12:18:16 +0200
Subject: [PATCH] Add a man page for Xephyr, with information from the README file.

---
 hw/kdrive/ephyr/Makefile.am    |   16 +++++++-
 hw/kdrive/ephyr/Xephyr.man.pre |   84 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 99 insertions(+), 1 deletions(-)
 create mode 100644 hw/kdrive/ephyr/Xephyr.man.pre

diff --git a/hw/kdrive/ephyr/Makefile.am b/hw/kdrive/ephyr/Makefile.am
index bf1f475..9380e4d 100644
--- a/hw/kdrive/ephyr/Makefile.am
+++ b/hw/kdrive/ephyr/Makefile.am
@@ -83,2 +83,18 @@ Xephyr_LDFLAGS = $(LD_EXPORT_SYMBOLS_FLAG)
 relink:
 	rm -f $(bin_PROGRAMS) && make $(bin_PROGRAMS)
+
+MAN_SRCS = Xephyr.man.pre
+
+appmandir = $(APP_MAN_DIR)
+appman_DATA = Xephyr.$(APP_MAN_SUFFIX)
+
+Xephyr.$(APP_MAN_SUFFIX): Xephyr.man
+	-rm -f Xephyr.$(APP_MAN_SUFFIX)
+	$(LN_S) Xephyr.man Xephyr.$(APP_MAN_SUFFIX)
+
+include $(top_srcdir)/cpprules.in
+
+CLEANFILES = $(appman_DATA) Xephyr.man
+
+EXTRA_DIST = \
+	$(MAN_SRCS)
diff --git a/hw/kdrive/ephyr/Xephyr.man.pre b/hw/kdrive/ephyr/Xephyr.man.pre
new file mode 100644
index 0000000..19c9b86
--- /dev/null
+++ b/hw/kdrive/ephyr/Xephyr.man.pre
@@ -0,0 +1,84 @@
+."
+." Copyright (c) Matthieu Herrb <matthieu@herrb.eu>
+."
+." Permission to use, copy, modify, and distribute this software for any
+." purpose with or without fee is hereby granted, provided that the above
+." copyright notice and this permission notice appear in all copies.
+."
+." THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
+." WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
+." MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
+." ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
+." WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
+." ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
+." OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
+."
+.TH Xephyr __appmansuffix__ __vendorversion__
+.SH NAME
+Xephyr - X server outputting to a window on a pre-existing X display
+.SH SYNOPSIS
+.B Xephyr
+.RI [\fB:\fP display ]
+.RI [ option
+.IR ... ]
+.SH DESCRIPTION
+.B Xephyr 
+is a a kdrive server that outputs to a window on a pre-existing
+'host' X display. 
+Think 
+.I Xnest 
+but with support for modern extensions like composite, damage and randr. 
+.PP
+Unlike 
+.I Xnest 
+which is an X proxy, i.e.  limited to the capabilities of the host X server, 
+.B Xephyr 
+is a real X server which
+uses the host X server window as "framebuffer" via fast SHM XImages.
+.PP
+It also has support for "visually" debugging what the server is
+painting.
+.SH OPTIONS
+.TP 8
+.BI -screen " width" x height
+sets the screen size.
+.TP 8
+.BI -parent " id"
+uses exiting window
+.I id .
+.TP 8
+.B -host-cursor
+set 'cursor acceleration':
+The host's cursor is reused. This is only really there to aid
+debugging by avoiding server paints for the cursor. Performance
+improvement is negiable.
+.SH "SIGNALS"
+Send a SIGUSR1 to the server (e.g. pkill -USR1 Xephyr) to
+toggle the debugging mode. 
+In this mode red rectangles are painted to
+screen areas getting painted before painting the actual content. 
+The
+delay between this can be altered by setting a XEPHYR_PAUSE env var to
+a value in micro seconds.
+.SH CAVEATS
+.PP
+.IP \(bu 2
+Rotated displays are currently updated via full blits. This
+is slower than a normal oprientated display. Debug mode will
+therefore not be of much use rotated.  
+.IP \(bu 2
+The '-host-cursor' cursor is static in its appearence. 
+.IP \(bu 2
+The build gets a warning about 'nanosleep'. I think the various '-D'
+build flags are causing this. I havn't figured as yet how to work
+round it. It doesn't appear to break anything however. 
+.IP \(bu 2
+Keyboard handling is basic but works. 
+.TP \(bu 2
+Mouse button 5 probably wont work. 
+.SH "SEE ALSO"
+X(__miscmansuffix), Xserver(__appmansuffix__)
+.SH AUTHOR
+Matthew Allum <mallum@o-hand.com> 2004 
+
+
-- 
1.5.6.5


From dacad9ae0bdaedff9403fbe84a5c5a4b4eef3542 Mon Sep 17 00:00:00 2001
From: Alan Coopersmith <alan.coopersmith@sun.com>
Date: Fri, 21 Nov 2008 17:16:22 -0800
Subject: [PATCH] Xephyr man page typo fixes.

Also trailing white space removal to clear git warnings.
---
 hw/kdrive/ephyr/Xephyr.man.pre |   42 ++++++++++++++++++++--------------------
 1 files changed, 21 insertions(+), 21 deletions(-)

diff --git a/hw/kdrive/ephyr/Xephyr.man.pre b/hw/kdrive/ephyr/Xephyr.man.pre
index 19c9b86..7f0e811 100644
--- a/hw/kdrive/ephyr/Xephyr.man.pre
+++ b/hw/kdrive/ephyr/Xephyr.man.pre
@@ -22,17 +22,17 @@ Xephyr - X server outputting to a window on a pre-existing X display
 .RI [ option
 .IR ... ]
 .SH DESCRIPTION
-.B Xephyr 
+.B Xephyr
 is a a kdrive server that outputs to a window on a pre-existing
-'host' X display. 
-Think 
-.I Xnest 
-but with support for modern extensions like composite, damage and randr. 
+'host' X display.
+Think
+.I Xnest
+but with support for modern extensions like composite, damage and randr.
 .PP
-Unlike 
-.I Xnest 
-which is an X proxy, i.e.  limited to the capabilities of the host X server, 
-.B Xephyr 
+Unlike
+.I Xnest
+which is an X proxy, i.e.  limited to the capabilities of the host X server,
+.B Xephyr
 is a real X server which
 uses the host X server window as "framebuffer" via fast SHM XImages.
 .PP
@@ -51,12 +51,12 @@ uses exiting window
 set 'cursor acceleration':
 The host's cursor is reused. This is only really there to aid
 debugging by avoiding server paints for the cursor. Performance
-improvement is negiable.
+improvement is negligible.
 .SH "SIGNALS"
 Send a SIGUSR1 to the server (e.g. pkill -USR1 Xephyr) to
-toggle the debugging mode. 
+toggle the debugging mode.
 In this mode red rectangles are painted to
-screen areas getting painted before painting the actual content. 
+screen areas getting painted before painting the actual content.
 The
 delay between this can be altered by setting a XEPHYR_PAUSE env var to
 a value in micro seconds.
@@ -64,21 +64,21 @@ a value in micro seconds.
 .PP
 .IP \(bu 2
 Rotated displays are currently updated via full blits. This
-is slower than a normal oprientated display. Debug mode will
-therefore not be of much use rotated.  
+is slower than a normal orientated display. Debug mode will
+therefore not be of much use rotated.
 .IP \(bu 2
-The '-host-cursor' cursor is static in its appearence. 
+The '-host-cursor' cursor is static in its appearance.
 .IP \(bu 2
 The build gets a warning about 'nanosleep'. I think the various '-D'
-build flags are causing this. I havn't figured as yet how to work
-round it. It doesn't appear to break anything however. 
+build flags are causing this. I haven't figured as yet how to work
+round it. It doesn't appear to break anything however.
 .IP \(bu 2
-Keyboard handling is basic but works. 
+Keyboard handling is basic but works.
 .TP \(bu 2
-Mouse button 5 probably wont work. 
+Mouse button 5 probably wont work.
 .SH "SEE ALSO"
-X(__miscmansuffix), Xserver(__appmansuffix__)
+X(__miscmansuffix__), Xserver(__appmansuffix__)
 .SH AUTHOR
-Matthew Allum <mallum@o-hand.com> 2004 
+Matthew Allum <mallum@o-hand.com> 2004
 
 
-- 
1.5.6.5

