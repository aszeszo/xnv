diff -Nurp -x '*~' -x '*.orig' hw/xfree86/dri/dri.c hw/xfree86/dri/dri.c
--- hw/xfree86/dri/dri.c	2010-06-06 10:53:51.000000000 -0700
+++ hw/xfree86/dri/dri.c	2010-09-03 16:45:27.658917271 -0700
@@ -2494,7 +2494,11 @@ int drmInstallSIGIOHandler(int fd, void 
     entry     = drmGetEntry(fd);
     entry->f  = f;
 
+#if defined(__sun) && defined(__SVR4)
+    return 1;
+#else
     return xf86InstallSIGIOHandler(fd, drmSIGIOHandler, 0);
+#endif
 }
 
 int drmRemoveSIGIOHandler(int fd)
@@ -2503,5 +2507,9 @@ int drmRemoveSIGIOHandler(int fd)
 
     entry->f = NULL;
 
+#if defined(__sun) && defined(__SVR4)
+    return 1;
+#else
     return xf86RemoveSIGIOHandler(fd);
+#endif
 }
