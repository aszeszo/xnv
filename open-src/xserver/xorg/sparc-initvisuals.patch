diff -ur mi/micmap.c.orig mi/micmap.c
--- mi/micmap.c.orig	Thu May 21 21:55:01 2009
+++ mi/micmap.c	Thu May 21 21:58:03 2009
@@ -497,6 +497,11 @@
  * the set which can be used with this version of cfb.
  */
 
+#if defined(__sparc__) || defined(__sparc)
+miInitVisualsProcPtr miInitVisualsProc = NULL;
+#endif /* __sparc__ */
+
+
 _X_EXPORT Bool
 miInitVisuals(VisualPtr *visualp, DepthPtr *depthp, int *nvisualp,
 		int *ndepthp, int *rootDepthp, VisualID *defaultVisp,
@@ -516,6 +521,13 @@
     int		*preferredCVCs, *prefp;
     int		first_depth;
 
+#if defined(__sparc__) || defined(__sparc)
+    if (miInitVisualsProc) {
+       return (miInitVisualsProc(visualp, depthp, nvisualp, ndepthp,
+               rootDepthp, defaultVisp, sizes, bitsPerRGB, preferredVis));
+    }
+#endif /* __sparc__ */
+
     /* none specified, we'll guess from pixmap formats */
     if (!miVisuals) 
     {
