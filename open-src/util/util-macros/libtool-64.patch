X-Git-Url: http://git.savannah.gnu.org/gitweb/?p=libtool.git;a=blobdiff_plain;f=libltdl%2Fm4%2Flibtool.m4;h=e34cbc4e18485482467934c71d0935bb51433f88;hp=75f1e0e7a03352c7e5f1f30e84f2f95a9b094d33;hb=c177a3000006e39143735520d957f6873b9bd2fe;hpb=35526d6c6431f3bde46751b514584639b60c547c

diff --git a/libltdl/m4/libtool.m4 b/libltdl/m4/libtool.m4
index 75f1e0e..e34cbc4 100644
--- a/libltdl/m4/libtool.m4
+++ b/libltdl/m4/libtool.m4
@@ -1201,7 +1201,11 @@ sparc*-*solaris*)
     *64-bit*)
       case $lt_cv_prog_gnu_ld in
       yes*) LD="${LD-ld} -m elf64_sparc" ;;
-      *)    LD="${LD-ld} -64" ;;
+      *)
+	if ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then
+	  LD="${LD-ld} -64"
+	fi
+	;;
       esac
       ;;
     esac
