2002-07-30  jacob berkman  <jacob@ximian.com>

	* driver/demo-Gtk.c (wm_popup_close_cb): 
	(wm_toplevel_close_cb): these should return a gboolean, not void

	fixes #89320

2002-07-23  jacob berkman  <jacob@ximian.com>

	* driver/demo-Gtk.c (manual_cb): fix some warnings (for bug
	#80436)

2002-06-17  jacob berkman  <jacob@ximian.com>

	* configure.in: fix lock dialog checks (Mahmood Ali
	<Mahmood.Ali@Sun.COM>)

2002-06-04  jacob berkman  <jacob@ximian.com>

	* configure.in: fix xml 2 checks

	-- merge 4.04.2 + HEAD --

2002-06-03  jacob berkman  <jacob@ximian.com>

	* driver/Makefile.in (GLADE_DATADIR): fix tyop

2002-05-29  jacob berkman  <jacob@ximian.com>

	* driver/subprocs.c (describe_dead_child): don't reference
	si->passwd_pid unless we are buildng for the gtk lock dialog
	(based on patch from HideToshi Tajima <hidetoshi.tajima@sun.com>)
	
2002-05-28  jacob berkman  <jacob@ximian.com>

	* Makefile.in: merge fixes from HEAD

2002-05-24  jacob berkman  <jacob@ximian.com>

	* driver/lock-Gtk.c (make_dialog): bail if xss isn't running, call
	xss to get the version and user, and display the date
	(main): setup remote atoms and init i18n

	fixes bug #82141

	* configure.in: only require autoconf 2.52

	-- merge in 4.03 --

	* driver/subprocs.c (describe_dead_child): check against our lock
	dialog child

	fixes #80932

2002-05-06  Arvind Samptur <arvind.samptur@wipro.com>

	* driver/lock.c (destroy_passwd_window) : variable passwd_string is not intialized
	if HAVE_XSCREENSAVER_LOCK defined, hence moving memeset to the else part to avoid
	crash.

2002-04-18  jacob berkman  <jacob@ximian.com>

	-- merge in HEAD + 4.02 --

2002-04-18  jacob berkman  <jacob@ximian.com>

	-- merge in 4.02 --

	* driver/xscreensaver-demo.glade2: fix icons and bug #79022

2002-04-05  jacob berkman  <jacob@ximian.com>

	* driver/subprocs.c (describe_dead_child): 
	* driver/lock.c (passwd_event_loop): kill more spew in terse mode

2002-04-04  jacob berkman  <jacob@ximian.com>

	* driver/lock-Gtk.c (make_dialog): add atk description for
	progress bar

	* driver/lock.c: don't spew warnings in terse mode

2002-04-04  jacob berkman  <jacob@ximian.com>

	* driver/Makefile.in (GTK_SRCS): fix tyop which i think breaks
	makedepend on solaris

2002-04-02  jacob berkman  <jacob@ximian.com>

	* configure.in: remove -export-dynamic, workaround pkg-config bug
	by explicitely requiring gmodule.  also require gtk 2.0.1 since
	there were some bug fixes there we require

	* driver/demo-Gtk.c (pref_changed_event_cb): call
	pref_changed_cb(), return FALSE (fixes #77378)

	* driver/xscreensaver-demo.glade2: change spinbutton "changed"
	signals to use "value_changed" (fixes #76752) and make the handler
	for focus_out_events pref_changed_event_cb (fixes #77378)

	* hacks/xpm-pixmap.c (xpm_to_pixmap_1): only init gobject in the
	gtk 2 version

	* driver/windows.c (mouse_screen): kill warning

2002-03-29  jacob berkman  <jacob@ximian.com>

	* driver/xscrensaver-demo.glade2: keynav + atk fixes

	* driver/demo-Gtk.c (create_xscreensaver_demo): turn preview
	notebook tabs off
	(clear_preview_window): show the 'no preview available' label when
	there was an error starting the hack

2002-03-27  jacob berkman  <jacob@ximian.com>

	* driver/Makefile.in: name the .desktop
	screensaver-properties.desktop in all cases

	* driver/Makefile.in: install the .desktop file's icon in the
 	$gnomedatadir/pixmaps, and install the .desktop file in
 	$gnomedatadir/control-center-2.0 also

	* driver/screensaver-properties.desktop.in (Categories): add some
 	categories

	* driver/demo-Gtk.c (main): silently accept --crapplet for the
  	gtk2 version also

2002-03-27  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added Portuguese (pt) to ALL_LINGUAS.

2002-03-25  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added "sk" to ALL_LINGUAS.

2002-03-20  jacob berkman  <jacob@ximian.com>

	* driver/demo-Gtk.c (list_activated_cb): connect to row_activated
	rather than looking for double clicks

	* driver/xscreensaver-demo.glade2: turn off list titles

	* hacks/glx/xpm-ximage.c (xpm_to_ximage_1): port to new pixbuf api

2002-03-19  jacob berkman  <jacob@ximian.com>

	* hacks/glx/xpm-ximage.c: fix xlib-pixbuf header

	* driver/xscreensaver-demo.glade2:
	* driver/demo-Gtk.c: port to TreeView from GtkList, and fix a
	couple of bugs

	* hacks/xpm-pixmap.c: include path for gdk-pixbuf-xlib changed for
	gtk 2
	(xpm_to_pixmap_1): port to new pixbuf loading api, call
	g_type_init()

	* hacks/webcollage-helper.c (load_pixbuf): helper function to do
	both gtk 2 and gtk 1 pixbuf loading apis
	(paste): use new helper function
	(write_pixbuf): fix warning
	(main): call g_type_init()

	* driver/xscreensaver-demo.glade2:
	* driver/xscreensaver-demo.glade2p: use a real glade 2 file, not a
	libglade-convert generated one.

	* driver/demo-Gtk.c (name_to_widget): reformat warning string
	(warning_dialog): set the string as selectable
	(warning_dialog): set the ok/cancel buttons as defaultable stock
	buttons and switch them
	(warning_dialog): present the window rather than show/raise
	(about_menu_cb): use the right UTF-8 codes for (C), use a stock ok
	button
	(store_image_directory): fix a warning
	(populate_prefs_page): use gtk_spin_button_set_value()
	(eschew_gtk_lossage): fix a warning
	(create_xscreensaver_settings_dialog): set the advanced, standard
	buttons as secondary
	(main): don't do the pixmap hack for gtk 2 - use GtkArrow.

	* configure.in: add/fix checks for gdk-pixbuf-xlib for gtk2 build

2002-03-15  jacob berkman  <jacob@ximian.com>

	* configure.in: set GNOME_DATADIR to $(datadir) for gnome 2 build

	* mkinstalldirs: add since we aaren't automake'd

	* driver/demo-Gtk.c (main): only call bindtextdomain_codeset() for
	the gtk 2 buidl

	* Makefile.in (TARFILES): add some more files po/Makefile.in needs

	* driver/Makefile.in (EXTRAS): add .glade2 file

	* Makefile.in (TARFILES): add intltool and libtool files

2002-03-12  jacob berkman  <jacob@ximian.com>

	* autogen.sh: add libtool and intltool stuff, and remove automake

	* config.h.in: add HAVE_GTK2

	* configure.in: add checks for GTK 2.0, libxml 2.4, and libglade
	1.99.x

	* driver/Makefile.in: add intltool and glade vars, and fix for
	building against gtk 2.
	
	* driver/demo-Gtk-conf.c: (make_parameter):
	(make_parameters_1):
	(make_parameters):
	(load_configurator_1): port to libxml1 / libxml2 compat api
	
	* driver/demo-Gtk.c: (name_to_widget):
	(warning_dialog):
	(about_menu_cb):
	(fix_text_entry_sizes):
	(clear_preview_window):
	(create_xscreensaver_demo):
	(create_xscreensaver_settings_dialog):
	(main): port to gtk 2 / libglade and conditionally compile the
	non-libglade ui support for the gtk 1 version

	* driver/xscreensaver-demo.glade: fix icon paths

	* driver/xscreensaver-demo.glade2: libglade-converted file

2002-03-08  jacob berkman  <jacob@ximian.com>

	< merge patch from Carlos Perelló Marín <carlos@gnome-db.org> >

	* po/*: intl stuff
	
	* utils/xscreensaver-intl.h: define our gettext macros
	
	* utils/Makefile.in (HDRS): add xscreensaver-intl.h

	* driver/screensaver-properties.desktop.in: remove translations
	and use intltool

	* driver/demo-Gtk.c: 
	* driver/demo-Gtk-conf.c: include xscreensaver-intl, mark some
	strings for translation, initialize gettext

	* driver/Makefile.in: add libintl things

	* configure.in: add intltool / gettext macros
	(AC_OUTPUT): add po/Makefile.in.in

	* config.h.in: add GETTEXT_PACKAGE and ENABLE_NLS

	* Makefile.in (SUBDIRS): add po

	* HACKING: try to intimidate people

	* ChangeLog: new file to track changes
	
	* autogen.sh: stolen from glib

	* configure.in (HANDLE_X_PATH_ARG): fixup some [] escaping that
	breaks with autoconf 2.52

	* configure:
	* driver/XScreenSaver_ad.h: remove generated files

	* .cvsignore:
	* driver/.cvsignore:
	* hacks/.cvsignore:
	* utils/.cvsignore: quiet cvs
