<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The XKB Configuration Guide</title><link rel="stylesheet" href="/usr/share/sgml/X11/xorg.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.69.1" /><meta name="description" content="&#10;This document describes how to configure Xorg XKB from a user's point&#10;of view. It covers basic configuration syntax and gives also a few examples.&#10;       &#10;This version covers Xorg server versions 1.8 and later, used with the&#10;data files from the xkeyboard-config project.&#10;      " /></head><body><div class="article" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="id2465062"></a>The XKB Configuration Guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Kamil</span> <span class="surname">Toman</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Ivan</span> <span class="othername">U.</span> <span class="surname">Pascal</span></h3></div></div></div><div><p class="pubdate">November 2010</p></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>
This document describes how to configure Xorg XKB from a user's point
of view. It covers basic configuration syntax and gives also a few examples.
      </p><p>
This version covers Xorg server versions 1.8 and later, used with the
data files from the <a href="http://www.freedesktop.org/wiki/Software/XKeyboardConfig" target="_top">xkeyboard-config</a> project.
      </p></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id2467083">Overview</a></span></dt><dt><span class="sect1"><a href="#id2467110">Selecting XKB Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id2465084">Basic Configuration</a></span></dt><dt><span class="sect2"><a href="#id2494192">Advanced Configuration</a></span></dt><dt><span class="sect2"><a href="#id2494280">Even More Advanced Configuration</a></span></dt><dt><span class="sect2"><a href="#id2494338">Basic Global Options</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id2494369">Keymap XKB Configuration</a></span></dt></dl></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2467083"></a>Overview</h2></div></div></div><p>
The XKB configuration is decomposed into a number of components. Selecting
proper parts and combining them back you can achieve most of the configurations
you might need. Unless you have a completely atypical keyboard you really don't
need to touch any of the xkb configuration files.
    </p><p>
Some desktop environments now provide integrated graphical configuration
tools for setting XKB configuration as part of your desktop session.  The
instructions in this document are provided for those without such support,
those who need to configure XKB before the session startup (such as at the
login screen), or those who need to perform more advanced configuration
than those tools provide.
    </p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2467110"></a>Selecting XKB Configuration</h2></div></div></div><p>
The easiest and the most natural way to specify a keyboard mapping is to use
the <code class="literal">rules</code> component. As its name suggests it describes a number of
general rules to combine all bits and pieces into a valid and useful keyboard
mapping. All you need to do is to select a suitable rules file and then to
feed it with a few parameters that will adjust the keyboard behaviour to
fulfill your needs.
    </p><p>
      The parameters are:

      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term"><code class="option">XkbRules</code></span></td><td><p>
files of rules to be used for keyboard mapping composition
	  </p></td></tr><tr><td><span class="term"><code class="option">XkbModel</code></span></td><td><p>
 name of the model of your keyboard type
	  </p></td></tr><tr><td><span class="term"><code class="option">XkbLayout</code></span></td><td><p>
 layout(s) you intend to use
	  </p></td></tr><tr><td><span class="term"><code class="option">XkbVariant</code></span></td><td><p>
 variant(s) of the layout you intend to use
	  </p></td></tr><tr><td><span class="term"><code class="option">XkbOptions</code></span></td><td><p>
 extra xkb configuration options
	  </p></td></tr></tbody></table></div><p>

    </p><p>
The rules file used depends on your system.  The rules files commonly
used with Xorg are provided by the <a href="http://www.freedesktop.org/wiki/Software/XKeyboardConfig" target="_top">xkeyboard-config</a> project.
On Linux systems, the <code class="filename">evdev</code> rules are most
commonly used, on other systems the <code class="filename">base</code> rules
are used.  Some additional rules files exist for historical reasons,
but are no longer widely used.  In general, it's best to simply not
specify the rules file, in order to use the default rules selected
automatically by the X server.
    </p><p>
For each rules file there is a description file named
<code class="filename">&lt;<em class="replaceable"><code>vendor-rules</code></em>&gt;.lst</code>,
for instance <code class="filename">base.lst</code> which is located in
the xkb configuration subdirectory <code class="filename">rules</code>
(for example <code class="filename">/usr/share/X11/xkb/rules</code>).
    </p><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2465084"></a>Basic Configuration</h3></div></div></div><p>
Let's say you want to configure a PC-style American keyboard with 104
keys as described in <code class="filename">base.lst</code>.  This can be done
by simply writing several lines from below to a new configuration file
in <code class="filename">/etc/X11/xorg.conf.d</code>, such
as <code class="filename">/etc/X11/xorg.conf.d/90-custom-kbd.conf</code>.


	</p><pre class="screen">
Section "InputClass"
    Identifier "keyboard defaults"
    MatchIsKeyboard "on"

    Option "XkbModel" "pc104"
    Option "XkbLayout" "us"
    Option "XKbOptions" ""
EndSection
	</pre><p>

The values of <code class="option">XkbModel</code> and <code class="option">XkbLayout</code> are
really not surprising. The <code class="option">XkbOptions</code>
has been explicitly set to the empty set of parameters.
The <code class="option">XkbVariant</code> option has been left out.
That means the default variant named <code class="literal">basic</code>
is loaded.
      </p><p>
Of course, this can be also done at runtime using the utility
<span><strong class="command">setxkbmap</strong></span>.
The shell command loading the same keyboard mapping would look like:

	</p><pre class="screen">
setxkbmap -model pc104 -layout us -option ""
	</pre><p>

The configuration and the shell command would be very analogous
for most other layouts (internationalized mappings).
      </p><p><a id="zap"></a>
If you wanted to enable the <span><strong class="keycap">Ctrl</strong></span>+<span><strong class="keycap">Alt</strong></span>+<span><strong class="keycap">Backspace</strong></span> sequence to kill
the X server by default, you could create a configuration snippet
<code class="filename">/etc/X11/xorg.conf.d/90-zap.conf</code> containing:

	</p><pre class="screen">
Section "InputClass"
    Identifier "keyboard defaults"
    MatchIsKeyboard "on"

    Option "XKbOptions" "terminate:ctrl_alt_bksp"
EndSection
	</pre><p>

This would be equivalent to running the shell command:

	</p><pre class="screen">
setxkbmap -option "terminate:ctrl_alt_bksp"
	</pre><p>
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2494192"></a>Advanced Configuration</h3></div></div></div><p>
You can use multi-layouts xkb configuration.
What does it mean? Basically it allows to load up to four different
keyboard layouts at a time. Each such layout would reside in its
own group. The groups (unlike complete keyboard remapping) can be
switched very fast from one to another by a combination of keys.
      </p><p>
Let's say you want to configure your new Logitech cordless desktop
keyboard, you intend to use three different layouts at the same
time - us, czech and german (in this order), and that you are used to
<span><strong class="keycap">Alt</strong></span>+<span><strong class="keycap">Shift</strong></span>
combination for switching among them.
      </p><p>
Then the configuration snippet could look like this:

	</p><pre class="screen">
Section "InputClass"
    Identifier "Logitech Cordless"
    MatchIsKeyboard   "on"

    Option "XkbModel" "logicordless"
    Option "XkbLayout" "us,cz,de"
    Option "XKbOptions" "grp:alt_shift_toggle"
EndSection
	</pre><p>

Of course, this can be also done at runtime using the utility
<span><strong class="command">setxkbmap</strong></span>.
The shell command loading the same keyboard mapping would look like:

	</p><pre class="screen">
setxkbmap -model logicordless -layout "us,cz,de" \
         -option "grp:alt_shift_toggle"
	</pre><p>

      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2494280"></a>Even More Advanced Configuration</h3></div></div></div><p>
Okay, let's say you are more demanding. You do like the example
above but you want it to change a bit. Let's imagine you want
the czech keyboard mapping to use another variant but basic.
The configuration snippet then changes into:

	</p><pre class="screen">
Section "InputClass"
    Identifier "Logitech Cordless"
    MatchIsKeyboard   "on"

    Option "XkbModel" "logicordless"
    Option "XkbLayout" "us,cz,de"
    Option "XkbVariant" ",bksl,"
    Option "XKbOptions" "grp:alt_shift_toggle"
EndSection
	</pre><p>

That seems tricky but it is not. The logic for settings of variants
is the same as for layouts, that means the first and the third variant
settings are left out (set to <code class="literal">basic</code>),
the second is set to <code class="literal">bksl</code> (a special
variant with an enhanced definition of the backslash key).
      </p><p>
Analogously, the loading runtime will change to:

	</p><pre class="screen">
setxkbmap -model logicordless -layout "us,cz,de" \
         -variant ",bksl," -option "grp:alt_shift_toggle"
	</pre><p>

      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2494338"></a>Basic Global Options</h3></div></div></div><p>
For a list of available options, with a short decription of what they do,
see the section starting with “<span class="quote"><code class="literal">! option</code></span>” in the
<code class="filename">rules/*.lst</code> files.
      </p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2494369"></a>Keymap XKB Configuration</h2></div></div></div><p>
Keymap configuration is the way formerly used to configure xkb. The
user included a special keymap file which specified the direct xkb
configuration. This method has been obsoleted by previously described
rules files which are far more flexible and allow simpler and more
intuitive syntax. It is preserved merely for compatibility reasons and
should be avoided if possible.
    </p></div></div></body></html>
